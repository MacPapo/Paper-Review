{% extends 'base.html' %}
{% from "projects_components/_projects_accordion.html" import render_status_bedge %}
{% from "projects_components/_project_info.html" import render_info, render_pdfs %}

{% block content %}
<section class="py-4 py-md-5 my-5">
    <div class="container py-md-5">
        {{ render_info(project.versions[version_number - 1]) }}

        <hr class="hr" />
        <br>
        
        {{ render_pdfs(get_pdf_lambda(project.versions[version_number - 1].contains)) }}
        
    </div>
</section>
{% endblock %}

{% block scripts %}
{{ super() }}
<script type="text/javascript">
const myModal = document.getElementById('myModal')
const myInput = document.getElementById('myInput')

myModal.addEventListener('shown.bs.modal', () => {
  myInput.focus()
})
</script>
<script type="text/javascript">
 var pid = {{ project.pid }};
 $('#b1').click(function(e){
     e.preventDefault();
     var n = 1;
  $.ajax({
    url: `/project/${pid}/report_list/${n}`,
    type: 'GET',
    success: function(data) {
      var reports = data; // Extract the reports from the returned data
      var reportList = $('#report-list');
      reportList.empty(); // Clear the existing list

      // Iterate over the reports and create the list of links
      for (var i = 0; i < reports.length; i++) {
        var report = reports[i];
        var url = `/project/${report.pid}/report/${report.rid}/${report.rvid}`;
        var link = $('<a>').attr('href', url).text(report.title);
        var listItem = $('<li>').append(link);
        reportList.append(listItem);
      }
      console.log(data); // Log the data to the console for testing
    },
    error: function(error) {
      console.log(error); // Log any errors to the console
    }
  });
});




$('#b2').click(function(e){
     e.preventDefault();
     var n = 2;
  $.ajax({
    url: `/project/${pid}/report_list/${n}`,
    type: 'GET',
    success: function(data) {
      var reports = data; // Extract the reports from the returned data
      var reportList = $('#report-list');
      reportList.empty(); // Clear the existing list

      // Iterate over the reports and create the list of links
      for (var i = 0; i < reports.length; i++) {
        var report = reports[i];
        var url = `/project/${report.pid}/report/${report.rid}/${report.rvid}`;
        var link = $('<a>').attr('href', url).text(report.title);
        var listItem = $('<li>').append(link);
        reportList.append(listItem);
      }
      console.log(data); // Log the data to the console for testing
    },
    error: function(error) {
      console.log(error); // Log any errors to the console
    }
  });
});




$('#b3').click(function(e){
     e.preventDefault();
     var n = 3;
  $.ajax({
    url: `/project/${pid}/report_list/${n}`,
    type: 'GET',
    success: function(data) {
      var reports = data; // Extract the reports from the returned data
      var reportList = $('#report-list');
      reportList.empty(); // Clear the existing list

      // Iterate over the reports and create the list of links
      for (var i = 0; i < reports.length; i++) {
        var report = reports[i];
        var url = `/project/${report.pid}/report/${report.rid}/${report.rvid}`;
        var link = $('<a>').attr('href', url).text(report.title);
        var listItem = $('<li>').append(link);
        reportList.append(listItem);
      }
      console.log(data); // Log the data to the console for testing
    },
    error: function(error) {
      console.log(error); // Log any errors to the console
    }
  });
});




 $('#b4').click(function(e){
     e.preventDefault();
     var n = 4;
  $.ajax({
    url: `/project/${pid}/report_list/${n}`,
    type: 'GET',
    success: function(data) {
      var reports = data; // Extract the reports from the returned data
      var reportList = $('#report-list');
      reportList.empty(); // Clear the existing list

      // Iterate over the reports and create the list of links
      for (var i = 0; i < reports.length; i++) {
        var report = reports[i];
        var url = `/project/${report.pid}/report/${report.rid}/${report.rvid}`;
        var link = $('<a>').attr('href', url).text(report.title);
        var listItem = $('<li>').append(link);
        reportList.append(listItem);
      }
      console.log(data); // Log the data to the console for testing
    },
    error: function(error) {
      console.log(error); // Log any errors to the console
    }
  });
});

</script>
{% endblock %}
